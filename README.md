# Obsidian Chat Plugin

这是一个为 Obsidian 设计的 AI 助手插件，旨在提供流畅的对话体验和强大的功能，帮助你更好地在 Obsidian 中使用 VCPToolBox。

## ✨ 主要功能

*   **多 Agent 支持**：你可以创建和配置多个 Agent，每个 Agent 都可以拥有独立的系统提示词 (System Prompt)、模型设置和参数。
*   **灵活的对话管理**：
    *   **历史记录**：轻松查看、搜索、重命名和删除历史对话。
    *   **对话分支**：支持从任意消息处创建分支，探索不同的对话方向。
    *   **标签系统**：为对话添加自定义标签，方便分类和检索。
    *   **自动命名**：根据对话内容自动生成标题（支持自定义模型）。
*   **上下文感知**：
    *   **引用笔记**：在对话中引用当前激活的笔记内容，让 AI 基于你的笔记进行回答。
*   **自定义规则**：
    *   **正则替换**：支持配置正则表达式，在发送请求前或显示消息时自动替换内容（例如隐藏敏感信息或格式化输出）。
*   **导出功能**：将对话记录导出为 Markdown 文件，方便归档和分享。
*   **流式响应**：支持打字机效果的流式输出，无需等待完整生成。
*   **OpenAI 兼容**：支持任何兼容 OpenAI 接口的 API 服务（如 ChatGPT, Claude, Gemini 等）。

## ⚙️ 安装与配置

1.  **安装插件**：
    *   将插件文件夹放入你的 Obsidian 仓库的 `.obsidian/plugins/` 目录下。
    *   在插件根目录下运行"npm install"，然后运行"npm run build"。
    *   在 Obsidian 设置中启用 "OChat" 插件。

2.  **配置 API**：
    *   进入插件设置页面。
    *   填写 **API Endpoint** (API 地址) 和 **API Key**。
    *   配置默认的模型名称 (如 `gemini-2.5-flash-preview-09-2025`, `gemini-3-pro` 等)。

3.  **创建 Agent**：
    *   在设置中或聊天界面添加新的 Agent。
    *   设置 Agent 的名称、系统提示词和特定模型参数。

## 🚀 使用指南

*   **开启聊天**：点击左侧边栏的图标或使用命令 `Open OChat` 打开聊天窗口。
*   **新对话**：点击聊天窗口顶部的 "+" 按钮或使用命令 `New chat`。
*   **引用笔记**：在聊天输入框上方或通过特定操作引用当前打开的笔记。
*   **管理历史**：点击历史记录图标查看过往对话，支持搜索和批量导出。
*   **分支对话**：在某条消息的操作菜单中选择 "Branch"，基于该上下文开启新对话。

## 👂 常见问题

*   **Q1: 我想知道重命名最近三个话题是指的当前选中的agent的最近三个话题还是所有话题中的最近三个话题。**
    *   **A1: 重命名最近三个话题是指的当前选中的agent的最近三个话题。**
*   **Q2: 1. 聊天产生的话题保存在哪里？ 2. 配置的参数保存在哪里？**
    *   **A2: 1. 与.obsidian平级的.OChat-chats下 2. 插件根目录下的data.json里。**
*   **Q3: 1.**
---
*Developed by Gemini-3-Pro-Preview, not Zeta*
